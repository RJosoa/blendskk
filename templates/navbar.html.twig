<header class="absolute flex justify-between items-center w-full p-5 z-30">
  <!-- Logo -->
  <a href="{{ path('app_home') }}">
    <img
      src="{{ asset('img/dark_logo.svg') }}"
      alt="Logo"
      width="50"
      class="w-10"
    />
  </a>

  <!-- Hamburger button (visible on mobile) -->
  <div class="md:hidden flex items-center gap-5">
    <a class="auth" href="{{ path('app_login') }}">Sign In</a>
    {% if app.user %}
      <li>
        <a href="{{ path('app_posts_new') }}">New Post</a>
      </li>
      {% endif %}
    <button id="hamburger-button">
        <img
        src="{{ asset('img/icons/bars.svg') }}"
        alt="Logo"
        width="24"
        />
    </button>
  </div>

<!-- Mobile Navigation Menu (below navbar, hidden by default) -->
<nav id="nav-menu" class="hidden md:hidden fixed top-[5rem] left-0 w-full bg-white shadow-lg z-20">
  <div class="p-5 flex flex-col">

    <!-- Menu items -->
    <ul class="flex flex-col gap-5 items-center">
      <li>
        <a href="{{ path('app_explorer') }}">Explorer</a>
      </li>
      <li>
        <a href="{{ path('app_award') }}">Award</a>
      </li>
      {% if app.user %}
      <li>
        <a href="{{ path('app_posts_new') }}">New Post</a>
      </li>
      <li>
        <a href="{{ path('app_logout') }}">Logout</a>
      </li>
      {% else %}
      <li>
        <a class="auth register" href="{{ path('app_register') }}">Register</a>
      </li>
      {% endif %}
    </ul>
  </div>
</nav>

  <!-- Desktop Navigation (always visible on md+) -->
  <div class="hidden md:flex md:w-full">
    <div class="flex w-full">
        <ul class="absolute left-1/2 transform -translate-x-1/2 flex gap-5 items-center">
            <li>
            <a href="{{ path('app_explorer') }}">Explorer</a>
            </li>
            <li>
            <a href="{{ path('app_award') }}">Award</a>
            </li>
            <li>
            <a href="{{ path('app_tips') }}">Tips</a>
            </li>
        </ul>

        <ul class="flex gap-5 items-center justify-end ml-auto">
    {% if app.user %}
    <li>
        <a href="{{ path('app_posts_new') }}">New Post</a>
    </li>
        <li class="profile relative">
    <a href="{{ path('app_profile', {'id': app.user.id}) }}">
        {{ app.user.username|slice(0, 1)|upper }}
    </a>
    <!-- Dropdown sans group-hover -->
    <ul class="hidden absolute right-0 mt-2 p-2 bg-white shadow rounded">
        <li class="px-4 py-2 hover:bg-gray-200">
        <a href="{{ path('app_logout') }}">Logout</a>
        </li>
    </ul>
    </li>
    {% else %}
    <li>
        <a class="auth" href="{{ path('app_login') }}">Sign In</a>
    </li>
    <li>
        <a class="auth register" href="{{ path('app_register') }}">Register</a>
    </li>
    {% endif %}
</ul>


    </div>
  </div>
</header>

<!-- Keep the existing HTML structure, but update the script section -->

<script>
    document.addEventListener("DOMContentLoaded", () => {
  // Gestion du menu hamburger (mobile)
  const hamburgerButton = document.getElementById('hamburger-button');
  const closeButton = document.getElementById('close-menu');
  const navMenu = document.getElementById('nav-menu');

  if (hamburgerButton && navMenu) {
    hamburgerButton.addEventListener('click', () => {
      if (navMenu.classList.contains('hidden')) {
        navMenu.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Prevent scrolling
      } else {
        navMenu.classList.add('hidden');
        document.body.style.overflow = ''; // Restore scrolling
      }
    });
  }

  if (closeButton && navMenu) {
    closeButton.addEventListener('click', () => {
      navMenu.classList.add('hidden');
      document.body.style.overflow = '';
    });
  }

  // Gestion du dropdown du profil
  const profile = document.querySelector(".profile");
  if (profile) {
    const dropdown = profile.querySelector("ul");
    let timeoutId;

    profile.addEventListener("mouseenter", () => {
      clearTimeout(timeoutId);
      dropdown.classList.remove("hidden");
    });

    profile.addEventListener("mouseleave", () => {
      timeoutId = setTimeout(() => {
        dropdown.classList.add("hidden");
      }, 400); // 1 seconde de délai
    });
  }

  // Fermer le menu mobile au redimensionnement de la fenêtre
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768 && navMenu) {
      navMenu.classList.add('hidden');
      document.body.style.overflow = '';
    }
  });
});
</script>
