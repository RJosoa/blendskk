<article
  class="relative flex flex-col justify-between shadow-md rounded-2xl overflow-hidden bg-cover bg-center h-[650px]"
  style="background-image: url('{{ post.featureImage }}');"
>
  <div class="post-card-overlay"></div>
  <header class="relative w-full flex justify-between p-2">
    {{ include("./posts/_author.html.twig", { post: post }) }}
    <div class="absolute -top-1 -right-1">
        {# {% if post.id in favouritedPosts %} #}
        <img
          src="{{ asset('img/icons/favourite_full.svg') }}"
          alt="Favourite"
          class="w-12 h-12"
        />
        {# {% else %} #}
        {# <img
          src="{{ asset('img/icons/favourite_empty.svg') }}"
          alt="Favourite"
          class="w-12 h-12"
        /> #}
        {# {% endif %} #}
      </div>
  </header>
  <section class="relative flex flex-col h-full px-4 py-52 pb-4 gap-5">
    <p class=" text-sm font-medium px-4 py-1 bg-white/70 rounded-full w-max backdrop-blur-sm">
     {{ post.category ? post.category.name : "N/A" }}
    </p>
    <h2 class="text-3xl font-black mb-2 text-white">
      <a
        href="{{ path('app_posts_show', { id: post.id }) }}"
        class="no-underline hover:underline "
      >
        {{ post.title|length > 40 ? post.title|slice(0, 40) ~ '...' : post.title }}
      </a>
    </h2>
    <p class="text-gray-600 mt-5">
      {{ post.description|length > 100 ? post.description|slice(0, 100) ~ '...' : post.description }}
    </p>
  </section>
  <footer>
     <div class="post-card" id="post-{{ post.id }}">
        <div class="{{ likesRepository.hasUserLikedPost(post, app.user) ? 'text-red-500' : 'text-gray-500' }} bg-black w-full py-2 rounded-b-lg flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 512 512" fill="currentColor">
                <path d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
            </svg>
        </div>
        <span id="like-count-{{ post.id }}">{{ likesRepository.countLikesByPost(post) }}</span>
    </div>
  </footer>
</article>
